(this["webpackJsonpstarter-bt5"]=this["webpackJsonpstarter-bt5"]||[]).push([[3],{401:function(e,t,n){"use strict";var c=n(17),a=n(3);t.a=function(e){return Object(a.jsxs)(c.g,{children:[Object(a.jsx)(c.j,{alt:"Card image cap",src:e.image}),Object(a.jsxs)(c.h,{className:"p-4",children:[Object(a.jsx)(c.m,{tag:"h5",children:e.title}),Object(a.jsx)(c.k,{children:e.subtitle}),Object(a.jsx)(c.l,{className:"mt-3",children:e.text}),Object(a.jsx)(c.e,{color:e.color,children:"Read More"})]})]})}},402:function(e,t,n){"use strict";t.a=n.p+"static/media/bg1.537e9bd5.jpg"},403:function(e,t,n){"use strict";t.a=n.p+"static/media/bg2.94ab4b60.jpg"},404:function(e,t,n){"use strict";t.a=n.p+"static/media/bg3.5668e1f0.jpg"},405:function(e,t,n){"use strict";t.a=n.p+"static/media/bg4.62319dde.jpg"},408:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(9),s=n(17),i=n(389),r=n(387),l=n(395),j=n(385),b=n(60),o=n.n(b),d=n(187),u=n(380),O=n(384),g=n(391),x=(n(406),n(3)),h=n(0),f=(n(203),function(e){return Object(x.jsx)(s.g,{children:Object(x.jsx)(s.h,{children:Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)("div",{className:"circle-box lg-box d-inline-block ".concat(e.bg),children:Object(x.jsx)("i",{className:e.icon})}),Object(x.jsxs)("div",{className:"ms-3",children:[Object(x.jsx)("h3",{className:"mb-0 font-weight-bold",children:e.earning}),Object(x.jsx)("small",{className:"text-muted",children:e.subtitle})]})]})})})}),m=(n(401),n(402)),p=n(403),v=n(404),w=n(405),N=n(46),S=n(21),D=n(67),C=(n(115),n(173)),y=n(153),k=n(171),F=(n(408),n.p+"static/media/spinner.e8697d57.gif"),A=Object(h.createContext)({scan:null,write:null,setActions:function(){}}),T=function(){var e=Object(h.useContext)(A),t=e.actions,n=e.setActions;return Object(x.jsxs)("div",{className:"scanner",children:[Object(x.jsx)("p",{className:"scanner-exit",onClick:function(){return n(Object(c.a)(Object(c.a)({},t),{},{scan:null}))},children:"X"}),Object(x.jsxs)("div",{className:"scanner-container",children:[Object(x.jsx)("img",{src:F,alt:"spinning log",className:"scanner-image"}),Object(x.jsx)("p",{className:"scanner-text",children:"Scanning..."})]})]})},E=(n(170),n(152),n(40)),R=n.n(E),I=n(80),H=function(){var e=Object(h.useState)(""),t=Object(a.a)(e,2),n=(t[0],t[1]),c=Object(h.useState)("111"),s=Object(a.a)(c,2),i=s[0],r=s[1],l=Object(h.useContext)(A),j=l.actions,b=l.setActions,o=Object(I.b)(),d=Object(h.useCallback)(Object(k.a)(Object(y.a)().mark((function e(){var t;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("NDEFReader"in window)){e.next=14;break}return e.prev=1,t=new window.NDEFReader,e.next=5,t.scan();case 5:console.log("Scan started successfully."),t.onreadingerror=function(){console.log("Cannot read data from the NFC tag. Try another one?")},t.onreading=function(e){console.log("NDEF message read."),O(e),b({scan:"scanned",write:null})},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error! Scan failed to start: ".concat(e.t0,"."));case 13:case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[b]),u=Object(S.e)(),O=function(e){var t=e.message,c=e.tagId;r(c);var a,s=Object(C.a)(t.records);try{for(s.s();!(a=s.n()).done;){var i=a.value;if("text"===i.recordType){var l=new TextDecoder(i.encoding);n(l.decode(i.data))}}}catch(j){s.e(j)}finally{s.f()}};return Object(h.useEffect)((function(){d()}),[d]),Object(x.jsx)(x.Fragment,{children:"scanned"===j.scan?Object(x.jsxs)("div",{children:["scanner"===o&&u("/tags/scan/"+i),"tagger"===o&&u("/tags/register/"+i),"admin"===o&&u("/tags/register/"+i),"superAdmin"===o&&u("/tags/register/"+i)]}):Object(x.jsx)(T,{status:j.scan})})},J=n(62),L=n(172);m.a,p.a,v.a,w.a,t.default=function(){var e=Object(h.useState)(o()()),t=Object(a.a)(e,2),n=t[0],b=t[1],m=Object(h.useState)(""),p=Object(a.a)(m,2),v=p[0],w=p[1],C=Object(h.useState)(o()()),y=Object(a.a)(C,2),k=(y[0],y[1],Object(I.b)()),F=(Object(S.e)(),Object(D.b)(),Object(h.useState)(!1)),T=Object(a.a)(F,2),E=T[0],P=T[1],W=Object(D.c)((function(e){return e.tagDetails.tagScanStatus})),B=Object(h.useState)(null),M=Object(a.a)(B,2),V=M[0],X=M[1],q=V||{},z=q.scan,G=(q.write,{actions:V,setActions:X}),K=function(e){X(Object(c.a)({},e))};Object(h.useState)({total:"",scanned:"",left:""});Object(h.useEffect)((function(){console.log(W),P(W)}),[W]),Object(h.useEffect)((function(){if(""!==v){var e={date:new Date(n).toLocaleDateString(),cityName:v};console.log(e),J.a.getTagStatusForVisitor(e).then((function(e){console.log(e.data),P((function(t){return Object(c.a)(Object(c.a)({},t),{},{total:e.data.totalTags,scanned:e.data.scannedTags,left:e.data.notScanned})}))})).catch((function(e){console.log(e),R.a.fire({icon:"error",title:"Error",text:e.response.data.message})}))}}),[n,v]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{sm:"6",lg:"6",children:("scanner"===k||"admin"===k||"superAdmin"===k)&&Object(x.jsx)(N.a,{title:"Scan Tag",children:Object(x.jsx)(s.F,{children:Object(x.jsx)(s.n,{lg:"8",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{color:"primary",disabled:"scanner"!==k,onClick:function(){return K({scan:"scanning",write:null})},children:"Scan"})})})})})}),Object(x.jsx)(s.n,{sm:"6",lg:"6",children:("tagger"===k||"admin"===k||"superAdmin"===k)&&Object(x.jsx)(N.a,{title:"Register New Tag",children:Object(x.jsx)(s.F,{children:Object(x.jsx)(s.n,{lg:"8",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{color:"primary",onClick:function(){return K({scan:"scanning",write:null})},children:"Register"})})})})})})]}),("visitor"===k||"admin"===k||"superAdmin"===k)&&Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsxs)(L.a,{children:[Object(x.jsxs)(l.a,{sx:{marginBottom:1,minWidth:"100%"},children:[Object(x.jsx)(i.a,{id:"demo-simple-select-autowidth-label",children:"City"}),Object(x.jsxs)(j.a,{labelId:"city",id:"city",value:v,onChange:function(e){w(e.target.value)},autoWidth:!0,label:"City",children:[Object(x.jsx)(r.a,{value:"",children:Object(x.jsx)("em",{children:"None"})}),Object(x.jsx)(r.a,{value:"Hisar",children:"Hisar"}),Object(x.jsx)(r.a,{value:"Sirsa",children:"Sirsa"}),Object(x.jsx)(r.a,{value:"Delhi",children:"Delhi"})]})]}),Object(x.jsx)(d.a,{dateAdapter:u.a,children:Object(x.jsx)(O.a,{value:n,onChange:function(e){b(e)},renderInput:function(e){return Object(x.jsx)(g.a,Object(c.a)({},e))},disableFuture:!0,shouldDisableDate:function(e){var t=new Date(e);if(t>new Date)return!0;if(0===t.getDay())return!0;var n=new Date;return n.setDate(n.getDate()-3),t<n}})})]})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-info text-into",title:"Sales",subtitle:"Total",earning:E.total,icon:"bi bi-bag"})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-warning text-warning",title:"New Project",subtitle:"Scanned",earning:E.scanned,icon:"bi bi-basket3"})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-danger text-danger",title:"Refunds",subtitle:"Left",earning:E.left,icon:"bi bi-wrong"})})]}),Object(x.jsx)(A.Provider,{value:G,children:z&&Object(x.jsx)(H,{})})]})}}}]);
//# sourceMappingURL=3.b9e52480.chunk.js.map